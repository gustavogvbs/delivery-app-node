// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
 // previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum role {
 ADMIN
 DEV 
 TENANT
 CLIENT
}

model User { 
  id String @id @default(uuid())
  email String @unique
  name String  
  password String
  role role

  profile Profile?
  tenant Tenant?

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("users") 
}

model Profile {
  id String @id @default(uuid())
  phone String 

  userId String? @unique
  user User? @relation(fields: [userId], references: [id])

  @@map("profilers") 
}

model Tenant {
  id String @id @default(uuid())
  slug String @unique
  name String
  city String
  primaryColor String
  phone String

  userId String? @unique
  user User? @relation(fields: [userId], references: [id])

  categories Category[]
  products Product[]

  @@map("tenants") 
}

model Category {
id String @id @default(uuid())
name String
slug String @unique
created_at DateTime @default(now())
updated_at DateTime @updatedAt

products Product[]

tenantId String @unique
tenant Tenant @relation(fields: [tenantId], references: [id])

@@map("categorys") //Renomeia a tabela
}

model Product {
id String @id @default(uuid())
slug String
name String
price Float
description String
created_at DateTime @default(now())
updated_at DateTime @updatedAt

tenantId String @unique
tenant Tenant @relation(fields: [tenantId], references: [id])
categoryId String @unique
category Category @relation(fields: [categoryId], references: [id])

@@map("products") 
}



model Adress { 
id String @id @default(uuid())
cep String
city String
neighborhood String
road String
number String
complment String @default("")
created_at DateTime @default(now())
updated_at DateTime @updatedAt

@@map("adresses") //Renomeia a tabela  
}

model image {
id String @id @default(uuid())
name String
url String
content_type String
created_at DateTime @default(now())
updated_at DateTime @updatedAt

@@map("images") //Renomeia a tabela
}



